saas_config:
  fides_key: segment_connector_example
  name: Segment SaaS Config
  description: A sample schema representing the Segment connector for Fidesops
  version: 0.0.1

  connector_params:
    - name: domain
    - name: workspace
    - name: access_token
    - name: namespace_id
    - name: segment_access_secret

  client_config:
    protocol: https
    host:
      connector_param: domain
    authentication:
      strategy: basic_authentication
      configuration:
        username:
          connector_param: segment_access_secret

  test_request:
    path: /<api_version>/workspaces
    # TODO - custom authorization hasn't written this time
    # TODO - Please refer to the original YAML for further details
    request_params:
      - name: api_version
        type: path
        default_value: v1beta
    
  endpoints:
  - name: segment_user_del
    requests:
      delete:
        # TODO - custom authorization hasn't written this time
        # TODO - Please refer to the original YAML for further details  

        # TODO - custom HTTP method hasn't written this time
        # TODO - Please refer to the original YAML for further details      

         # TODO - custom HTTP body hasn't written this time
        # TODO - Please refer to the original YAML for further details     
        path: /<api_version>/workspaces/<workspace_name>/regulations
        request_params:
          - name: api_version
            type: path
            default_value: v1beta
          - name: workspace_name
            type: path
            default_value: workspace
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
  - name: segment_user
    requests:
      read:
        path: /<api_version>/spaces/<namespace_id>/collections/users/profiles/user_id:<user_id>/metadata
        request_params:
          - name: api_version
            type: path
            default_value: v1
          - name: namespace_id
            type: path
            default_value: namespace_id
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
          - name: user_id
            type: path
            identity: userId       
      # TODO - sourceValueChecker hasn't written at this time
      # TODO - Please refer to the original YAML for further details
  - name: track_events
    requests:
      read:
        path: /<api_version>/spaces/<namespace_id>/collections/users/profiles/<segment_id>/events
        request_params:
          - name: api_version
            type: path
            default_value: v1
          - name: namespace_id
            type: path
            default_value: namespace_id
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
          - name: segment_id
            type: path
            references:
              - dataset: segment_connector_example
                field: segment_user.segment_id
                direction: from          
        data_path: data
  - name: traits
    requests:
      read:
        path: /<api_version>/spaces/<namespace_id>/collections/users/profiles/<segment_id>/traits
        request_params:
          - name: api_version
            type: path
            default_value: v1   
          - name: namespace_id
            type: path
            default_value: namespace_id
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
          - name: segment_id
            type: path
            references:
              - dataset: segment_connector_example
                field: segment_user.segment_id
                direction: from
          - name: limit
            type: query
            default_value: 17
          - name: next
            default_value: link
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
        data_path: traits    
        pagination:
          strategy: link
          configuration:
            source: body
            path: cursor.next
  - name: external_ids
    requests:
      read:
        path: /<api_version>/spaces/<namespace_id>/collections/users/profiles/<segment_id>/external_ids
        request_params:
          - name: api_version
            type: path
            default_value: v1
          - name: namespace_id
            type: path
            default_value: namespace_id
            # TODO - Getting connector param value for request_params hasn't written this time
            # TODO - Please refer to the original YAML for further details
          - name: segment_id
            type: path
            references:
              - dataset: segment_connector_example
                field: segment_user.segment_id
                direction: from
        data_path: data                