saas_config:
  fides_key: gorgias_connector_example
  name: Gorgias SaaS Config
  description: A sample schema representing the Gorgias connector for Fidesops
  version: 0.0.1

  connector_params:
    - name: domain
    - name: api_email
    - name: api_key
    - name: per_page

  client_config:
    protocol: https
    host:
      connector_param: domain
    authentication:
      strategy: basic_authentication
      configuration:
        username:
          connector_param: api_email
        password:
          connector_param: api_key

  test_request:
    path: /api/customers
    request_params:
      - name: email
        type: query
        data_type: string
        default_value: foo@bar.com

  endpoints:    
    - name: customer
      requests:
        read:
          path: /api/customers
          request_params:
            - name: email
              type: query
              identity: email
              data_type: string
            - name: per_page
              type: query
              default_value: 2
            - name: page
              type: query
              default_value: 1
              # TODO - pagination wasn’t supported at the time it was written.
              # below page value has to come from pagination section 
          data_path: data
          pagination:
            strategy: page
            configuration:
              incremental_param: page
              increment_by: 1                        
        delete:
          path: /api/customers/<customerId>
          request_params:
            - name: customerId
              type: path
              references:
                - dataset: gorgias_connector_example
                  field: customer.id
                  direction: from               
    - name: tickets
      requests:
        read:
          path: /api/tickets
          request_params:
            - name: customer_id
              type: query
              references:
                - dataset: gorgias_connector_example
                  field: customer.id
                  direction: from  
            - name: per_page
              type: query
              default_value: 30
              # TODO - connector_param wasn’t supported at the time it was written.
              # per_page value has to be supplied
              # Please to refer to the original YAML spec as this originally had a DATA_STORE 
            - name: page
              type: query
              default_value: 1
              # TODO - pagination wasn’t supported at the time it was written.
              # below page value has to come from pagination section 
          data_path: data
          pagination:
            strategy: page
            configuration:
              incremental_param: page
              increment_by: 1
        delete:
          path: /api/tickets/<ticketId>
          request_params:
            - name: ticketId
              type: path
              references:
                - dataset: gorgias_connector_example
                  field: tickets.id
                  direction: from
    - name: ticket_messages
      requests:
        read:
          path: /api/tickets/<ticket_id>/messages
          request_params:
            - name: ticket_id
              type: path
              references:
                - dataset: gorgias_connector_example
                  field: tickets.id
                  direction: from
            - name: per_page
              type: query
              default_value: 30
              # TODO - connector_param wasn’t supported at the time it was written.
              # per_page value has to be supplied
              # Please to refer to the original YAML spec as this originally had a DATA_STORE 
            - name: page
              type: query
              default_value: 1
          data_path: data
          pagination:
            strategy: page
            configuration:
              incremental_param: page
              increment_by: 1