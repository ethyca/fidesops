saas_config:
  fides_key: gorgias_connector_example
  name: Gorgias SaaS Config
  description: A sample schema representing the Gorgias connector for Fidesops
  version: 0.0.1

  connector_params:
    - name: domain
    - name: api_email
    - name: api_key
    - name: per_page

  client_config:
    protocol: https
    host:
      connector_param: domain
    authentication:
      strategy: basic_authentication
      configuration:
        username:
          connector_param: api_email
        password:
          connector_param: api_key

  test_request:
    path: /api/customers
    method: GET
    query_params:
      - name: email
        value: <email>
    param_values:
      - name: email
        data_type: string
        value: foo@bar.com

  endpoints:    
    - name: customer
      requests:
        read:
          path: /api/customers
          method: GET
          query_params:
            - name: email
              value: <email>
            - name: per_page
              value: 30
            - name: page
              value: 1
          param_values:
            - name: email
              identity: email
              data_type: string
          data_path: data
          pagination:
            strategy: offset
            configuration:
              incremental_param: page
              increment_by: 1                        
        delete:
          path: /api/customers/<customerId>
          method: DELETE
          param_values:
            - name: customerId
              references:
                - dataset: gorgias_connector_example
                  field: customer.id
                  direction: from               
    - name: tickets
      requests:
        read:
          path: /api/tickets
          method: GET
          query_params:
            - name: customer_id
              value: <customer_id>
            - name: per_page
              value: 30
            - name: page
              value: 1
              # TODO - connector_param wasn’t supported at the time it was written.
              # per_page value has to be supplied
              # Please to refer to the original YAML spec as this originally had a DATA_STORE 
          param_values:
            - name: customer_id
              references:
                - dataset: gorgias_connector_example
                  field: customer.id
                  direction: from  
              # TODO - pagination wasn’t supported at the time it was written.
              # below page value has to come from pagination section 
          data_path: data
          pagination:
            strategy: page
            configuration:
              incremental_param: page
              increment_by: 1
        delete:
          path: /api/tickets/<ticketId>
          method: DELETE
          param_values:
            - name: ticketId
              references:
                - dataset: gorgias_connector_example
                  field: tickets.id
                  direction: from
    - name: ticket_messages
      requests:
        read:
          path: /api/tickets/<ticket_id>/messages
          method: GET
          query_params:
            - name: per_page
              value: 30
            - name: page
              value: 1              
          param_values:
            - name: ticket_id
              references:
                - dataset: gorgias_connector_example
                  field: tickets.id
                  direction: from
              # TODO - connector_param wasn’t supported at the time it was written.
              # per_page value has to be supplied
              # Please to refer to the original YAML spec as this originally had a DATA_STORE 
          data_path: data
          pagination:
            strategy: page
            configuration:
              incremental_param: page
              increment_by: 1