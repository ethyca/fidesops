saas_config:
  fides_key: mixpanel_connector_example
  name: Mixpanel SaaS Config
  description: A sample schema representing the Mixpanel connector for Fidesops
  version: 0.0.1

  connector_params:
    - name: api_secret
    - name: token
    - name: gdpr_oauth_token
    # TODO - OPTION wasnâ€™t supported at the time it was written.
    - name: domain

  client_config:
    protocol: https
    host:
      # TODO - we will have the user set the EU vs US domain at the time of configuration 
      connector_param: domain
    authentication:
      strategy: basic_authentication
      configuration:
        username:
          connector_param: api_secret

  test_request:
    path: /api/2.0/annotations
    method: GET
    
  endpoints:
  - name: user
    requests:
      read:
        path: /api/2.0/engage/
        method: GET
        query_params:
          - name: where
            value: <where>
            value: properties["$email"]=="<>"
          - name: page_size
            value: 1000
          - name: page
            value: 1
          - name: session_id
            value: session_id
        param_values:
          - name: where
            identity: email
            data_type: string
        data_path: results
        pagination:
          strategy: link
          configuration:
            source: body
            path: session_id       
      update:
        path: /engage#profile-set
        method: POST
        # TODO - Custom mimeType wasn't supported at the time it was written
        # Please to refer to the original YAML spec as this originally had a mimeType

        # TODO - body payload wasn't supported at the time it was written
        # Please to refer to the original YAML spec as this originally had a body

      delete:
        path: /api/app/data-deletions/v3.0/
        method: POST
        # TODO - Custom method wasn't supported at the time it was written
        # Please to refer to the original YAML spec as this originally had a method

        # TODO - Different authorization wasn't supported at the time it was written
        # Please to refer to the original YAML spec as this originally had a authorization  
        query_params:
          - name: token
            value: <token>    
        param_values:
          - name: token
            # TODO - connector_param wasn't supported for request_params at the time it was written
            # Please to refer to the original YAML spec as this originally had a DATA_STORE  
            value: ""

        # TODO - body payload wasn't supported at the time it was written
        # Please to refer to the original YAML spec as this originally had a body                
  - name: events
    requests:
      read:
        path: /api/2.0/stream/query
        method: GET
        query_params:
          - name: distinct_ids
            value: <distinct_ids>
        param_values:
          - name: distinct_ids
            value: '["<>"]'
            references:
              - dataset: mixpanel_connector_example
                field: user.$distinct_id
                direction: from
        data_path: results.events             